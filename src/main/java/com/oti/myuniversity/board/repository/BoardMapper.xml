<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.oti.myuniversity.board.repository.IBoardRepository">

<select id="selectArticleListByCatoryType" parameterType="map" resultType="com.oti.myuniversity.board.model.Board">
	<![CDATA[
		SELECT
			BOARDID,
			BOARDTITLE,
			BOARDCONTENT,
			BOARDDATE,
			MEMBERID
		FROM BOARDS
		WHERE boards.boardcategory = #{categoryType}
		ORDER BY BOARDDATE
		OFFSET (#{end} - #{start})*(#{pageNo}-1) ROWS
		FETCH NEXT 10 ROWS ONLY
	]]>
</select>

<select id="selectTotalArticleCountByCategoryType" parameterType="int" resultType="int">
	<![CDATA[
		SELECT COUNT(BOARDID) AS "count"
		FROM BOARDS
		WHERE BOARDCATEGORY = #{categoryType}
	]]>
</select>

<select id="selectArticle" resultType="com.oti.myuniversity.board.model.Board" parameterType="int">
	<![CDATA[
		select 
			boards.BOARDID as boardId,
			BOARDTITLE,
			BOARDCONTENT,
			BOARDDATE,
			BOARDCATEGORY,
			REPORTDEADLINE,
			SUBMISSIONSUBMITDATE,
			SUBMISSIONSCORE,
			MEMBERID,
			boards_files.BOARDFILEID as boardFileId,
			boards_files.BOARDFILENAME as boardFileName,
			boards_files.BOARDFILESIZE as boardFileSize,
			boards_files.BOARDFILECONTENTTYPE as boardFileContentType
			from boards left outer join boards_files 
			on boards.boardid = boards_files.boardid
			where boards.BOARDID=#{boardId}

	]]>


</select>

</mapper>