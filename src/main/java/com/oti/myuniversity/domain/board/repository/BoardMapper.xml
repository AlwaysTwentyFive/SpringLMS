<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.oti.myuniversity.domain.board.repository.IBoardRepository">

<select id="selectArticleListByCatoryType" parameterType="map" resultType="com.oti.myuniversity.domain.board.model.Board">
	<![CDATA[
		SELECT
			BOARDID,
			BOARDTITLE,
			BOARDCONTENT,
			BOARDDATE,
			MEMBERID
		FROM BOARDS
		WHERE boards.boardcategory = #{categoryType}
		ORDER BY BOARDDATE
		OFFSET (#{end} - #{start})*(#{pageNo}-1) ROWS
		FETCH NEXT 10 ROWS ONLY
	]]>
</select>

<select id="selectTotalArticleCountByCategoryType" parameterType="int" resultType="int">
	<![CDATA[
		SELECT COUNT(BOARDID) AS "count"
		FROM BOARDS
		WHERE BOARDCATEGORY = #{categoryType}
	]]>
</select>

<select id="selectArticle" resultType="com.oti.myuniversity.domain.board.model.Board" parameterType="int">
	<![CDATA[
		select 
			boards.BOARDID,
			BOARDTITLE,
			BOARDCONTENT,
			BOARDDATE,
			BOARDCATEGORY,
			REPORTDEADLINE,
			SUBMISSIONSUBMITDATE,
			SUBMISSIONSCORE,
			boards.MEMBERID,
			membername
		from boards left join members on boards.memberid = members.memberid
		where boards.BOARDID=#{boardId}
	]]>
</select>


<insert id="insertLibrary" parameterType="com.oti.myuniversity.domain.board.model.Board">
	<![CDATA[
		insert into boards
				(BOARDID,
				BOARDTITLE,
				BOARDCONTENT,
				BOARDDATE,
				BOARDCATEGORY,
				MEMBERID)
		VALUES (
				SEQ_BOARDID.NEXTVAL,
				#{boardTitle},
				#{boardContent},
				sysdate, 
				#{boardCategory}, 
				#{memberId})
	]]>
	
</insert>

<select id="getMaxBoardId" resultType="int">
	<![CDATA[
		select nvl(max(boards.boardid),0) as boardid FROM boards
	]]>
</select>

<select id="getBoard" parameterType="int" resultType="com.oti.myuniversity.domain.board.model.Board">
<![CDATA[
	SELECT
		BOARDTITLE,
		BOARDCONTENT,
		BOARDDATE
	FROM
		BOARDS
	WHERE
		BOARDID=#{boardId}
]]>
</select>

</mapper>